<mxfile host="65bd71144e">
    <diagram name="Iowa Liquor Sales Architecture" id="architecture">
        <mxGraphModel dx="697" dy="464" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="bigquery" value="BigQuery&#xa;iowa_sales&#xa;(Raw Dataset)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="80" y="200" width="140" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="eda-notebook" value="eda_iowa.ipynb&#xa;(Jupyter Notebook)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11" parent="1" vertex="1">
                    <mxGeometry x="330" y="220" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow2" value="Query &amp; Analyze" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;exitPerimeter=0;" parent="1" source="bigquery" target="eda-notebook" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="cloudrun" value="Cloud Run&#xa;(ETL Service)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="330" y="354" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow3" value="Extract Data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10" parent="1" source="bigquery" target="cloudrun" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="bronze" value="GCS Bucket&#xa;Bronze Layer&#xa;(Raw/Ingested)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="540" y="380" width="140" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="arrow4" value="Load Data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10" parent="1" source="cloudrun" target="bronze" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dataproc" value="Google Cloud Dataproc&#xa;PySpark Cluster&#xa;(ETL Transform)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="760" y="400" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow5" value="Transform" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10" parent="1" source="bronze" target="dataproc" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="gold" value="GCS Bucket&#xa;Gold Layer&#xa;(Aggregated/Features)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="760" y="200" width="140" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="arrow6" value="Write Gold" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=10" parent="1" source="dataproc" target="gold" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ml-model" value="PySpark ML&#xa;Regression Model&#xa;(Training &amp; Prediction)&#xa;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;fontSize=12;fontStyle=1;dashed=1" parent="1" vertex="1">
                    <mxGeometry x="1010" y="220" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow7" value="Load Features" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;dashed=1" parent="1" source="gold" target="ml-model" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="predictions" value="Predictions&#xa;(GCS/BigQuery)&#xa;" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;fontStyle=1;dashed=1" parent="1" vertex="1">
                    <mxGeometry x="1020" y="370" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow8" value="Export" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;dashed=1" parent="1" source="ml-model" target="predictions" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="credentials" value="credentials.json&#xa;(Service Account)" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10" parent="1" vertex="1">
                    <mxGeometry x="80" y="80" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;fontSize=10" parent="1" source="credentials" target="bigquery" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="title" value="Iowa Liquor Sales - ML Pipeline Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="320" y="30" width="480" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#666666;dashed=1" parent="1" vertex="1">
                    <mxGeometry x="80" y="520" width="200" height="230" as="geometry"/>
                </mxCell>
                <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="90" y="530" width="60" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend1" value="Storage" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=8;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="90" y="560" width="50" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="legend1-text" value="GCS Buckets" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="150" y="567" width="100" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend2" value="EDA" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="90" y="605" width="50" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend2-text" value="Analysis Scripts" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="150" y="607" width="100" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend3" value="Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="90" y="640" width="50" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend3-text" value="Cloud Run ETL" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="150" y="642" width="100" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend4" value="ETL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="90" y="675" width="50" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend4-text" value="Dataproc ETL" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="150" y="677" width="100" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend5" value="ML" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;fontSize=9;dashed=1" parent="1" vertex="1">
                    <mxGeometry x="90" y="710" width="50" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend5-text" value="ML Model" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9" parent="1" vertex="1">
                    <mxGeometry x="150" y="712" width="100" height="20" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
